import{r as a,j as e,a as L,b as M,c as v,L as T,f as u}from"./index-DPsYLnZ3.js";import{Q as R}from"./QuantityInput-Djhg-TvD.js";import{P as w}from"./Rating-B0ZoW-KJ.js";import{P as z}from"./ProductCard-eiwjbAtE.js";function A(){const[o,p]=a.useState(""),[l,f]=a.useState("All");a.useMemo(()=>["All",...Array.from(new Set(w.map(s=>s.category)))],[]);const n=a.useMemo(()=>w.filter(s=>{const t=l==="All"||s.category===l,m=s.title.toLowerCase().includes(o.toLowerCase());return t&&m}),[o,l]),c=a.useRef(null),i=a.useRef(!1),d=a.useRef(0),r=a.useRef(0),[h,g]=a.useState(!1),k=s=>{const t=c.current;t&&(i.current=!0,g(!0),d.current=s.clientX||0,r.current=t.scrollLeft)},S=s=>{const t=c.current;if(!t||!i.current)return;const x=(s.clientX||0)-d.current;t.scrollLeft=r.current-x},b=()=>{i.current=!1,g(!1)},j=(s=1)=>{const t=c.current;t&&t.scrollBy({left:s*t.clientWidth*.9,behavior:"fadeinout"})};return a.useEffect(()=>{const s=c.current;if(!s)return;let t;const m=()=>{const y=s.querySelector("[data-card]");if(!y)return;const N=y.getBoundingClientRect().width-24,C=Math.round(s.scrollLeft/N)*N;s.scrollTo({left:C,behavior:"fadeinout"})},x=()=>{clearTimeout(t),t=setTimeout(m,250)};return s.addEventListener("scroll",x,{passive:!0}),()=>{clearTimeout(t),s.removeEventListener("scroll",x)}},[]),e.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center gap-3 justify-between",children:e.jsx("h1",{className:"text-2xl font-semibold",children:"Önerilen Ürünler"})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>j(-1),"aria-label":"Önceki",className:`hidden md:flex absolute left-0 top-1/2 -translate-y-1/2 z-10
                     h-10 w-10 rounded-full border bg-white shadow-sm
                     items-center justify-center hover:bg-gray-50`,children:"‹"}),e.jsxs("div",{ref:c,tabIndex:0,role:"region","aria-label":"Ürün carousel",className:["flex gap-4 sm:gap-6 overflow-x-auto","snap-x snap-proximity scroll-px-4 pb-2 pt-1","scroll-smooth","touch-pan-x overscroll-x-contain overscroll-y-none","select-none",h?"cursor-grabbing":"cursor-grab","[-webkit-overflow-scrolling:touch]"].join(" "),onMouseDown:k,onMouseMove:S,onMouseLeave:b,onMouseUp:b,children:[n.map(s=>e.jsx("div",{"data-card":!0,className:"snap-start shrink-0 w-[86%] xs:w-[80%] sm:w-[60%] md:w-1/2 lg:w-1/3",children:e.jsx(z,{product:s})},s.id)),n.length===0&&e.jsx("div",{className:"min-h-[8rem] flex items-center text-gray-500",children:"Sonuç bulunamadı."})]}),e.jsx("button",{onClick:()=>j(1),"aria-label":"Sonraki",className:`hidden md:flex absolute right-0 top-1/2 -translate-y-1/2 z-10
                     h-10 w-10 rounded-full border bg-white shadow-sm
                     items-center justify-center hover:bg-gray-50`,children:"›"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Mobilde kartları sürükleyerek kaydırabilirsin."})]})}function B(){const{items:o,updateQty:p,summary:l}=L(),f=M(),n=l.subtotal>750?0:49.9,c=a.useMemo(()=>l.subtotal+n,[l.subtotal,n]),i=v(l.subtotal,450),d=v(c,450);return o.length?e.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-10",children:[e.jsx("div",{className:"mb-4 md:mb-6",children:e.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Sepet"})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4",children:o.map(r=>e.jsxs("div",{className:"rounded-2xl border bg-white p-3 sm:p-4 flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"shrink-0",children:e.jsx("img",{src:r.image,alt:r.title,className:"w-20 h-20 sm:w-24 sm:h-24 object-cover rounded-xl"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium line-clamp-2",children:r.title}),e.jsx("div",{className:"text-sm text-gray-600 mt-0.5",children:u(r.price)})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(R,{value:r.qty,min:0,onChange:h=>p(r.id,h)})})]},r.id))}),e.jsxs("aside",{className:"rounded-2xl border bg-white p-5 h-fit lg:sticky lg:top-20",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Sipariş Özeti"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Ara Toplam"}),e.jsx("span",{className:"tabular-nums",children:u(i)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Kargo"}),e.jsx("span",{className:"tabular-nums",children:n===0?"Ücretsiz":u(n)})]})]}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"font-semibold",children:"Toplam"}),e.jsx("span",{className:"tabular-nums text-lg font-semibold",children:u(d)})]}),e.jsx("button",{className:"w-full mt-4 px-4 py-2 rounded-xl bg-black text-white",onClick:()=>f("/checkout"),children:"Ödemeye Geç"}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"₺750 üzeri siparişlerde kargo ücretsiz."})]})]})]}):e.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"Sepetiniz boş."}),e.jsx(T,{to:"/products",className:"inline-flex px-4 py-2 rounded-xl bg-black text-white",children:"Alışverişe Dön"})]}),e.jsx(A,{})]})}export{B as default};
